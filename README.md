# library-order

谨以此脚本纪念：2021年3月因疫情，图书馆座位限额1000人预约

在该脚本测试过程中，发现后台服务器未对预约时间进行校验，仅有前端预约校验，绕过后即可直接预约未约满的任一日，即使超出两天的预约限制也可直接预约

> 测试时尝试对第三天预约发现成功，由于页面公开，所有人都可看到第三天被一人提前预约，紧急取消了第三天的预约，但还是被广大QQ群友截到了图……（我们班一同学所加群里有人发了）

在该脚本成功开发后不到一天的时间里，图书馆即取消了限额预约制……此脚本胎死腹中……

## 预约逻辑（已经忘得差不多了）
几个参数分别用于
```
  预约(ctl00$MainContent$YuYue)
  取消预约(ctl00$MainContent$QXYY)
  我的预约(ctl00$MainContent$YuYueYuebtn)
```
~咱就是说，开发你写的参数命名能不能不要那么随意……~

然后会在请求时带上页面内的几项隐藏参数（查看HTML源代码即可）
```
    __EVENTARGUMENT
    __VIEWSTATE
    __VIEWSTATEGENERATOR
    __EVENTVALIDATION
```
通过正则或者标签分析抓出来这几项参数然后填进去就可以直接预约了。

至于说预约时间，完全是靠前端进行校验的，服务器对请求数据采取的措施则是直接尝试预约，满了就约不上，没满就能约。

论前后端校验的重要性
